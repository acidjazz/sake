var Spa;

Spa = {
  instagram: false,
  original: null,
  page: null,
  cache: {
    window: window,
    stickied: false
  },
  options: {
    work: '/work/',
    studio: '/studio/',
    contact: '/contact/'
  },
  i: function() {
    Spa.page = Spa.original = location.pathname;
    Spa.activate(Spa.page);
    Preimg($('#container > #inner'), function(complete) {
      console.log((complete * 100) + "%");
      return $('.spinner > .complete').css('height', (complete * 100) + "%");
    }, function(done) {
      $('.spinner > .complete').css('height', '100%');
      return setTimeout(function() {
        _.off('.spinner');
        $('.spinner > .complete').css('height', '0%');
        return _.on('#container > #inner');
      }, 1000);
    });
    Spa.cache.window = $(window);
    Spa.handlers();
    if ($(window).width() > 1000) {
      return setInterval(Spa.header, 20);
    }
  },
  header: function() {
    if (Spa.cache.window.scrollTop() > 400 && Spa.cache.stickied === false) {
      _.on('header.sticky');
      _.off('header.normal');
      $('#container').addClass('sticky');
      Spa.cache.stickied = true;
    }
    if (Spa.cache.window.scrollTop() < 400 && Spa.cache.stickied === true) {
      _.off('header.sticky');
      _.on('header.normal');
      $('#container').removeClass('sticky');
      return Spa.cache.stickied = false;
    }
  },
  handlers: function() {
    $('header > .inner > .menu > ul > li > a, header > .inner > a.logo').on('click', Spa.menuHandler);
    $(window).bind('popstate', Spa.pop);
    $('#container').on('click', '.page.work > .tiles > a.tile', Spa.tileHandler);
    return $('#container').on('click', '.page.detail > .submenu > a', Spa.submenuHandler);
  },
  tileHandler: function(e) {
    var page;
    e.preventDefault();
    page = $(this).attr('href');
    if (page === void 0) {
      return true;
    }
    if (page === location.pathname) {
      return true;
    }
    return Spa.load(page, '#inner', '#container > #inner', function() {
      return Spa.push();
    });
  },
  submenuHandler: function(e) {
    var page;
    e.preventDefault();
    page = $(this).attr('href');
    if (page === void 0) {
      return true;
    }
    if (page === location.pathname) {
      return true;
    }
    _.on('.spinner');
    _.off('.submenu a');
    _.on(".submenu a.item_" + (page.replace('work', '').replace(/\//g, '')));
    return Spa.load(page, '.details', '#container > #inner .details', function() {
      return Spa.push();
    });
  },
  menuHandler: function(e) {
    var page;
    e.preventDefault();
    page = $(this).data('page');
    if (page === void 0) {
      return true;
    }
    if (page === location.pathname) {
      return true;
    }
    return Spa.load(page, '#inner', '#container > #inner', function() {
      return Spa.push();
    });
  },
  activate: function() {
    var k, ref, results, v;
    _.off('header > .inner > .menu > ul > li > a');
    ref = Spa.options;
    results = [];
    for (k in ref) {
      v = ref[k];
      if (Spa.page.match(v) !== null) {
        results.push(_.on("header > .inner > .menu > ul > li > a.option_" + k));
      } else {
        results.push(void 0);
      }
    }
    return results;
  },
  load: function(page, find, replace, cb) {
    _.on('.spinner');
    return $.get(page).success(function(result) {
      var html;
      html = $(result).filter('#container').find(find);
      return Preimg(html, function(complete) {
        return $('.spinner > .complete').css('height', (complete * 100) + "%");
      }, function(done) {
        $('.spinner > .complete').css('height', '100%');
        return setTimeout(function() {
          _.off('.spinner');
          $('.spinner > .complete').css('height', '0%');
          $(replace).replaceWith(html);
          _.on('#container > #inner');
          Spa.page = page;
          if (typeof cb === "function") {
            cb();
          }
          return Spa.activate();
        }, 1000);
      });
    });
  },
  push: function() {
    return history.pushState({
      url: Spa.page
    }, "Design Sake Studio - " + Spa.page, Spa.page);
  },
  pop: function(e) {
    if (e.originalEvent.state === null) {
      return Spa.load(Spa.original);
    } else {
      return Spa.load(e.originalEvent.state.url);
    }
  }
};

//# sourceMappingURL=data:application/json;base64,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c291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIlxuU3BhID1cblxuICBpbnN0YWdyYW06IGZhbHNlXG4gIG9yaWdpbmFsOiBudWxsXG4gIHBhZ2U6IG51bGxcbiAgY2FjaGU6XG4gICAgd2luZG93OiB3aW5kb3dcbiAgICBzdGlja2llZDogZmFsc2VcbiAgb3B0aW9uczpcbiAgICB3b3JrOiAnL3dvcmsvJ1xuICAgIHN0dWRpbzogJy9zdHVkaW8vJ1xuICAgIGNvbnRhY3Q6ICcvY29udGFjdC8nXG5cbiAgaTogLT5cblxuICAgIFNwYS5wYWdlID0gU3BhLm9yaWdpbmFsID0gbG9jYXRpb24ucGF0aG5hbWVcbiAgICBTcGEuYWN0aXZhdGUgU3BhLnBhZ2VcblxuICAgIFByZWltZyAkKCcjY29udGFpbmVyID4gI2lubmVyJyksIChjb21wbGV0ZSkgLT5cbiAgICAgIGNvbnNvbGUubG9nIFwiI3tjb21wbGV0ZSoxMDB9JVwiXG4gICAgICAkKCcuc3Bpbm5lciA+IC5jb21wbGV0ZScpLmNzcyAnaGVpZ2h0JywgXCIje2NvbXBsZXRlKjEwMH0lXCJcbiAgICAsIChkb25lKSAtPlxuICAgICAgJCgnLnNwaW5uZXIgPiAuY29tcGxldGUnKS5jc3MgJ2hlaWdodCcsICcxMDAlJ1xuICAgICAgc2V0VGltZW91dCAtPlxuICAgICAgICBfLm9mZiAnLnNwaW5uZXInXG4gICAgICAgICQoJy5zcGlubmVyID4gLmNvbXBsZXRlJykuY3NzICdoZWlnaHQnLCAnMCUnXG4gICAgICAgIF8ub24gJyNjb250YWluZXIgPiAjaW5uZXInXG4gICAgICAsIDEwMDBcblxuICAgIFNwYS5jYWNoZS53aW5kb3cgPSAkKHdpbmRvdylcblxuICAgIFNwYS5oYW5kbGVycygpXG5cbiAgICBpZiAkKHdpbmRvdykud2lkdGgoKSA+IDEwMDBcbiAgICAgIHNldEludGVydmFsIFNwYS5oZWFkZXIsIDIwXG5cbiAgaGVhZGVyOiAtPlxuXG4gICAgaWYgU3BhLmNhY2hlLndpbmRvdy5zY3JvbGxUb3AoKSA+IDQwMCBhbmQgU3BhLmNhY2hlLnN0aWNraWVkIGlzIGZhbHNlXG4gICAgICBfLm9uICdoZWFkZXIuc3RpY2t5J1xuICAgICAgXy5vZmYgJ2hlYWRlci5ub3JtYWwnXG4gICAgICAkKCcjY29udGFpbmVyJykuYWRkQ2xhc3MgJ3N0aWNreSdcblxuICAgICAgU3BhLmNhY2hlLnN0aWNraWVkID0gdHJ1ZVxuXG4gICAgaWYgU3BhLmNhY2hlLndpbmRvdy5zY3JvbGxUb3AoKSA8IDQwMCBhbmQgU3BhLmNhY2hlLnN0aWNraWVkIGlzIHRydWVcbiAgICAgIF8ub2ZmICdoZWFkZXIuc3RpY2t5J1xuICAgICAgXy5vbiAnaGVhZGVyLm5vcm1hbCdcbiAgICAgICQoJyNjb250YWluZXInKS5yZW1vdmVDbGFzcyAnc3RpY2t5J1xuICAgICAgU3BhLmNhY2hlLnN0aWNraWVkID0gZmFsc2VcblxuICBoYW5kbGVyczogLT5cblxuICAgICMgbWFpbiBtZW51XG4gICAgJCgnaGVhZGVyID4gLmlubmVyID4gLm1lbnUgPiB1bCA+IGxpID4gYSwgaGVhZGVyID4gLmlubmVyID4gYS5sb2dvJykub24gJ2NsaWNrJywgU3BhLm1lbnVIYW5kbGVyXG5cbiAgICAjIGJhY2sgYnV0dG9uXG4gICAgJCh3aW5kb3cpLmJpbmQgJ3BvcHN0YXRlJywgU3BhLnBvcFxuXG4gICAgIyB3b3JrIHRpbGUgbWVudVxuICAgICQoJyNjb250YWluZXInKS5vbiAnY2xpY2snLCAnLnBhZ2Uud29yayA+IC50aWxlcyA+IGEudGlsZScsIFNwYS50aWxlSGFuZGxlclxuXG4gICAgIyB3b3JrIHN1YiBtZW51XG4gICAgJCgnI2NvbnRhaW5lcicpLm9uICdjbGljaycsICcucGFnZS5kZXRhaWwgPiAuc3VibWVudSA+IGEnLCBTcGEuc3VibWVudUhhbmRsZXJcblxuICB0aWxlSGFuZGxlcjogKGUpIC0+XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgIHBhZ2UgPSAkKHRoaXMpLmF0dHIgJ2hyZWYnXG5cbiAgICByZXR1cm4gdHJ1ZSBpZiBwYWdlIGlzIHVuZGVmaW5lZFxuICAgIHJldHVybiB0cnVlIGlmIHBhZ2UgaXMgbG9jYXRpb24ucGF0aG5hbWVcblxuICAgIFNwYS5sb2FkIHBhZ2UsICcjaW5uZXInLCAnI2NvbnRhaW5lciA+ICNpbm5lcicsIC0+XG4gICAgICBTcGEucHVzaCgpXG5cbiAgc3VibWVudUhhbmRsZXI6IChlKSAtPlxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBwYWdlID0gJCh0aGlzKS5hdHRyICdocmVmJ1xuXG4gICAgcmV0dXJuIHRydWUgaWYgcGFnZSBpcyB1bmRlZmluZWRcbiAgICByZXR1cm4gdHJ1ZSBpZiBwYWdlIGlzIGxvY2F0aW9uLnBhdGhuYW1lXG5cbiAgICBfLm9uICcuc3Bpbm5lcidcbiAgICBfLm9mZiAnLnN1Ym1lbnUgYSdcbiAgICBfLm9uIFwiLnN1Ym1lbnUgYS5pdGVtXyN7cGFnZS5yZXBsYWNlKCd3b3JrJywgJycpLnJlcGxhY2UoL1xcLy9nLCAnJyl9XCJcblxuICAgIFNwYS5sb2FkIHBhZ2UsICcuZGV0YWlscycsICcjY29udGFpbmVyID4gI2lubmVyIC5kZXRhaWxzJywgLT5cbiAgICAgIFNwYS5wdXNoKClcbiAgICBcbiAgbWVudUhhbmRsZXI6IChlKSAtPlxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBwYWdlID0gJCh0aGlzKS5kYXRhICdwYWdlJ1xuXG4gICAgcmV0dXJuIHRydWUgaWYgcGFnZSBpcyB1bmRlZmluZWRcbiAgICByZXR1cm4gdHJ1ZSBpZiBwYWdlIGlzIGxvY2F0aW9uLnBhdGhuYW1lXG5cbiAgICBTcGEubG9hZCBwYWdlLCAnI2lubmVyJywgJyNjb250YWluZXIgPiAjaW5uZXInLCAtPlxuICAgICAgU3BhLnB1c2goKVxuXG4gIGFjdGl2YXRlOiAtPlxuICAgIF8ub2ZmICdoZWFkZXIgPiAuaW5uZXIgPiAubWVudSA+IHVsID4gbGkgPiBhJ1xuICAgIGZvciBrLCB2IG9mIFNwYS5vcHRpb25zXG4gICAgICBpZiBTcGEucGFnZS5tYXRjaCh2KSBpc250IG51bGxcbiAgICAgICAgXy5vbiBcImhlYWRlciA+IC5pbm5lciA+IC5tZW51ID4gdWwgPiBsaSA+IGEub3B0aW9uXyN7a31cIlxuXG4gIGxvYWQ6IChwYWdlLCBmaW5kLCByZXBsYWNlLCBjYikgLT5cblxuICAgIF8ub24gJy5zcGlubmVyJ1xuICAgIFxuICAgICQuZ2V0IHBhZ2VcbiAgICAgIC5zdWNjZXNzIChyZXN1bHQpIC0+XG4gICAgICAgIGh0bWwgPSAkKHJlc3VsdCkuZmlsdGVyKCcjY29udGFpbmVyJykuZmluZChmaW5kKVxuICAgICAgICBQcmVpbWcgaHRtbCwgKGNvbXBsZXRlKSAtPlxuICAgICAgICAgICQoJy5zcGlubmVyID4gLmNvbXBsZXRlJykuY3NzICdoZWlnaHQnLCBcIiN7Y29tcGxldGUqMTAwfSVcIlxuICAgICAgICAsIChkb25lKSAtPlxuICAgICAgICAgICQoJy5zcGlubmVyID4gLmNvbXBsZXRlJykuY3NzICdoZWlnaHQnLCAnMTAwJSdcbiAgICAgICAgICBzZXRUaW1lb3V0IC0+XG4gICAgICAgICAgICBfLm9mZiAnLnNwaW5uZXInXG4gICAgICAgICAgICAkKCcuc3Bpbm5lciA+IC5jb21wbGV0ZScpLmNzcyAnaGVpZ2h0JywgJzAlJ1xuICAgICAgICAgICAgJChyZXBsYWNlKS5yZXBsYWNlV2l0aCBodG1sXG4gICAgICAgICAgICBfLm9uICcjY29udGFpbmVyID4gI2lubmVyJ1xuICAgICAgICAgICAgU3BhLnBhZ2UgPSBwYWdlXG4gICAgICAgICAgICBjYj8oKVxuICAgICAgICAgICAgU3BhLmFjdGl2YXRlKClcbiAgICAgICAgICAsIDEwMDBcblxuICBwdXNoOiAtPlxuICAgIGhpc3RvcnkucHVzaFN0YXRlIHt1cmw6IFNwYS5wYWdlfSwgXCJEZXNpZ24gU2FrZSBTdHVkaW8gLSAje1NwYS5wYWdlfVwiLCBTcGEucGFnZVxuICAgICAgICBcbiAgcG9wOiAoZSkgLT5cbiAgICBpZiBlLm9yaWdpbmFsRXZlbnQuc3RhdGUgaXMgbnVsbFxuICAgICAgU3BhLmxvYWQgU3BhLm9yaWdpbmFsXG4gICAgZWxzZVxuICAgICAgU3BhLmxvYWQgZS5vcmlnaW5hbEV2ZW50LnN0YXRlLnVybFxuXG4iXX0=
