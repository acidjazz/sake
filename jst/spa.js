var Spa;

Spa = {
  instagram: false,
  original: null,
  page: null,
  cache: {
    window: window,
    stickied: false
  },
  options: {
    work: '/work/',
    studio: '/studio/',
    contact: '/contact/'
  },
  i: function() {
    Spa.page = Spa.original = location.pathname;
    Spa.activate(Spa.page);
    Preimg($('#container > #inner'), function(complete) {
      return $('.spinner > .complete').css('height', (complete * 100) + "%");
    }, function(done) {
      $('.spinner > .complete').css('height', '100%');
      return setTimeout(function() {
        _.off('.spinner');
        $('.spinner > .complete').css('height', '0%');
        return _.on('#container > #inner');
      }, 1000);
    });
    Spa.cache.window = $(window);
    Spa.handlers();
    if ($(window).width() > 1000) {
      return setInterval(Spa.header, 20);
    }
  },
  header: function() {
    if (Spa.cache.window.scrollTop() > 400 && Spa.cache.stickied === false) {
      _.on('header.sticky');
      _.off('header.normal');
      $('#container').addClass('sticky');
      Spa.cache.stickied = true;
    }
    if (Spa.cache.window.scrollTop() < 400 && Spa.cache.stickied === true) {
      _.off('header.sticky');
      _.on('header.normal');
      $('#container').removeClass('sticky');
      return Spa.cache.stickied = false;
    }
  },
  handlers: function() {
    $('header > .inner > .menu > ul > li > a, header > .inner > a.logo').on('click', Spa.menuHandler);
    $(window).bind('popstate', Spa.pop);
    $('#container').on('click', '.page.work > .tiles > a.tile', Spa.tileHandler);
    return $('#container').on('click', '.page.detail > .submenu > a', Spa.submenuHandler);
  },
  tileHandler: function(e) {
    var page;
    e.preventDefault();
    page = $(this).attr('href');
    if (page === void 0) {
      return true;
    }
    if (page === location.pathname) {
      return true;
    }
    return Spa.load(page, '#inner', '#container > #inner', function() {
      return Spa.push();
    });
  },
  submenuHandler: function(e) {
    var page;
    e.preventDefault();
    page = $(this).attr('href');
    if (page === void 0) {
      return true;
    }
    if (page === location.pathname) {
      return true;
    }
    _.on('.spinner');
    _.off('.submenu a');
    _.on(".submenu a.item_" + (page.replace('work', '').replace(/\//g, '')));
    return Spa.load(page, '.details', '#container > #inner .details', function() {
      return Spa.push();
    });
  },
  menuHandler: function(e) {
    var page;
    e.preventDefault();
    page = $(this).data('page');
    if (page === void 0) {
      return true;
    }
    if (page === location.pathname) {
      return true;
    }
    return Spa.load(page, '#inner', '#container > #inner', function() {
      return Spa.push();
    });
  },
  activate: function() {
    var k, ref, results, v;
    _.off('header > .inner > .menu > ul > li > a');
    ref = Spa.options;
    results = [];
    for (k in ref) {
      v = ref[k];
      if (Spa.page.match(v) !== null) {
        results.push(_.on("header > .inner > .menu > ul > li > a.option_" + k));
      } else {
        results.push(void 0);
      }
    }
    return results;
  },
  load: function(page, find, replace, cb) {
    _.on('.spinner');
    return $.get(page).success(function(result) {
      var html;
      html = $(result).filter('#container').find(find);
      return Preimg(html, function(complete) {
        return $('.spinner > .complete').css('height', (complete * 100) + "%");
      }, function(done) {
        $('.spinner > .complete').css('height', '100%');
        return setTimeout(function() {
          _.off('.spinner');
          $('.spinner > .complete').css('height', '0%');
          $(replace).replaceWith(html);
          _.on('#container > #inner');
          Spa.page = page;
          if (typeof cb === "function") {
            cb();
          }
          return Spa.activate();
        }, 1000);
      });
    });
  },
  push: function() {
    return history.pushState({
      url: Spa.page
    }, "Design Sake Studio - " + Spa.page, Spa.page);
  },
  pop: function(e) {
    if (e.originalEvent.state === null) {
      return Spa.load(Spa.original);
    } else {
      return Spa.load(e.originalEvent.state.url);
    }
  }
};

//# sourceMappingURL=data:application/json;base64,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QUFDLEdBQTFCLENBQThCLFFBQTlCLEVBQTBDLENBQUMsUUFBQSxHQUFTLEdBQVYsQ0FBQSxHQUFjLEdBQXhEO01BRFcsQ0FBYixFQUVFLFNBQUMsSUFBRDtRQUNBLENBQUEsQ0FBRSxzQkFBRixDQUF5QixDQUFDLEdBQTFCLENBQThCLFFBQTlCLEVBQXdDLE1BQXhDO2VBQ0EsVUFBQSxDQUFXLFNBQUE7VUFDVCxDQUFDLENBQUMsR0FBRixDQUFNLFVBQU47VUFDQSxDQUFBLENBQUUsc0JBQUYsQ0FBeUIsQ0FBQyxHQUExQixDQUE4QixRQUE5QixFQUF3QyxJQUF4QztVQUNBLENBQUEsQ0FBRSxPQUFGLENBQVUsQ0FBQyxXQUFYLENBQXVCLElBQXZCO1VBQ0EsQ0FBQyxDQUFDLEVBQUYsQ0FBSyxxQkFBTDtVQUNBLEdBQUcsQ0FBQyxJQUFKLEdBQVc7O1lBQ1g7O2lCQUNBLEdBQUcsQ0FBQyxRQUFKLENBQUE7UUFQUyxDQUFYLEVBUUUsSUFSRjtNQUZBLENBRkY7SUFGTyxDQURYO0VBSkksQ0E1R047RUFpSUEsSUFBQSxFQUFNLFNBQUE7V0FDSixPQUFPLENBQUMsU0FBUixDQUFrQjtNQUFDLEdBQUEsRUFBSyxHQUFHLENBQUMsSUFBVjtLQUFsQixFQUFtQyx1QkFBQSxHQUF3QixHQUFHLENBQUMsSUFBL0QsRUFBdUUsR0FBRyxDQUFDLElBQTNFO0VBREksQ0FqSU47RUFvSUEsR0FBQSxFQUFLLFNBQUMsQ0FBRDtJQUNILElBQUcsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxLQUFoQixLQUF5QixJQUE1QjthQUNFLEdBQUcsQ0FBQyxJQUFKLENBQVMsR0FBRyxDQUFDLFFBQWIsRUFERjtLQUFBLE1BQUE7YUFHRSxHQUFHLENBQUMsSUFBSixDQUFTLENBQUMsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLEdBQS9CLEVBSEY7O0VBREcsQ0FwSUwiLCJmaWxlIjoic3BhLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiXG5TcGEgPVxuXG4gIGluc3RhZ3JhbTogZmFsc2VcbiAgb3JpZ2luYWw6IG51bGxcbiAgcGFnZTogbnVsbFxuICBjYWNoZTpcbiAgICB3aW5kb3c6IHdpbmRvd1xuICAgIHN0aWNraWVkOiBmYWxzZVxuICBvcHRpb25zOlxuICAgIHdvcms6ICcvd29yay8nXG4gICAgc3R1ZGlvOiAnL3N0dWRpby8nXG4gICAgY29udGFjdDogJy9jb250YWN0LydcblxuICBpOiAtPlxuXG4gICAgU3BhLnBhZ2UgPSBTcGEub3JpZ2luYWwgPSBsb2NhdGlvbi5wYXRobmFtZVxuICAgIFNwYS5hY3RpdmF0ZSBTcGEucGFnZVxuXG4gICAgUHJlaW1nICQoJyNjb250YWluZXIgPiAjaW5uZXInKSwgKGNvbXBsZXRlKSAtPlxuICAgICAgJCgnLnNwaW5uZXIgPiAuY29tcGxldGUnKS5jc3MgJ2hlaWdodCcsIFwiI3tjb21wbGV0ZSoxMDB9JVwiXG4gICAgLCAoZG9uZSkgLT5cbiAgICAgICQoJy5zcGlubmVyID4gLmNvbXBsZXRlJykuY3NzICdoZWlnaHQnLCAnMTAwJSdcbiAgICAgIHNldFRpbWVvdXQgLT5cbiAgICAgICAgXy5vZmYgJy5zcGlubmVyJ1xuICAgICAgICAkKCcuc3Bpbm5lciA+IC5jb21wbGV0ZScpLmNzcyAnaGVpZ2h0JywgJzAlJ1xuICAgICAgICBfLm9uICcjY29udGFpbmVyID4gI2lubmVyJ1xuICAgICAgLCAxMDAwXG5cbiAgICBTcGEuY2FjaGUud2luZG93ID0gJCh3aW5kb3cpXG5cbiAgICBTcGEuaGFuZGxlcnMoKVxuXG4gICAgaWYgJCh3aW5kb3cpLndpZHRoKCkgPiAxMDAwXG4gICAgICBzZXRJbnRlcnZhbCBTcGEuaGVhZGVyLCAyMFxuXG4gIGhlYWRlcjogLT5cblxuICAgIGlmIFNwYS5jYWNoZS53aW5kb3cuc2Nyb2xsVG9wKCkgPiA0MDAgYW5kIFNwYS5jYWNoZS5zdGlja2llZCBpcyBmYWxzZVxuICAgICAgXy5vbiAnaGVhZGVyLnN0aWNreSdcbiAgICAgIF8ub2ZmICdoZWFkZXIubm9ybWFsJ1xuICAgICAgJCgnI2NvbnRhaW5lcicpLmFkZENsYXNzICdzdGlja3knXG5cbiAgICAgIFNwYS5jYWNoZS5zdGlja2llZCA9IHRydWVcblxuICAgIGlmIFNwYS5jYWNoZS53aW5kb3cuc2Nyb2xsVG9wKCkgPCA0MDAgYW5kIFNwYS5jYWNoZS5zdGlja2llZCBpcyB0cnVlXG4gICAgICBfLm9mZiAnaGVhZGVyLnN0aWNreSdcbiAgICAgIF8ub24gJ2hlYWRlci5ub3JtYWwnXG4gICAgICAkKCcjY29udGFpbmVyJykucmVtb3ZlQ2xhc3MgJ3N0aWNreSdcbiAgICAgIFNwYS5jYWNoZS5zdGlja2llZCA9IGZhbHNlXG5cbiAgaGFuZGxlcnM6IC0+XG5cbiAgICAjIG1haW4gbWVudVxuICAgICQoJ2hlYWRlciA+IC5pbm5lciA+IC5tZW51ID4gdWwgPiBsaSA+IGEsIGhlYWRlciA+IC5pbm5lciA+IGEubG9nbycpLm9uICdjbGljaycsIFNwYS5tZW51SGFuZGxlclxuXG4gICAgIyBiYWNrIGJ1dHRvblxuICAgICQod2luZG93KS5iaW5kICdwb3BzdGF0ZScsIFNwYS5wb3BcblxuICAgICMgd29yayB0aWxlIG1lbnVcbiAgICAkKCcjY29udGFpbmVyJykub24gJ2NsaWNrJywgJy5wYWdlLndvcmsgPiAudGlsZXMgPiBhLnRpbGUnLCBTcGEudGlsZUhhbmRsZXJcblxuICAgICMgd29yayBzdWIgbWVudVxuICAgICQoJyNjb250YWluZXInKS5vbiAnY2xpY2snLCAnLnBhZ2UuZGV0YWlsID4gLnN1Ym1lbnUgPiBhJywgU3BhLnN1Ym1lbnVIYW5kbGVyXG5cbiAgdGlsZUhhbmRsZXI6IChlKSAtPlxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBwYWdlID0gJCh0aGlzKS5hdHRyICdocmVmJ1xuXG4gICAgcmV0dXJuIHRydWUgaWYgcGFnZSBpcyB1bmRlZmluZWRcbiAgICByZXR1cm4gdHJ1ZSBpZiBwYWdlIGlzIGxvY2F0aW9uLnBhdGhuYW1lXG5cbiAgICBTcGEubG9hZCBwYWdlLCAnI2lubmVyJywgJyNjb250YWluZXIgPiAjaW5uZXInLCAtPlxuICAgICAgU3BhLnB1c2goKVxuXG4gIHN1Ym1lbnVIYW5kbGVyOiAoZSkgLT5cblxuICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgcGFnZSA9ICQodGhpcykuYXR0ciAnaHJlZidcblxuICAgIHJldHVybiB0cnVlIGlmIHBhZ2UgaXMgdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRydWUgaWYgcGFnZSBpcyBsb2NhdGlvbi5wYXRobmFtZVxuXG4gICAgXy5vbiAnLnNwaW5uZXInXG4gICAgXy5vZmYgJy5zdWJtZW51IGEnXG4gICAgXy5vbiBcIi5zdWJtZW51IGEuaXRlbV8je3BhZ2UucmVwbGFjZSgnd29yaycsICcnKS5yZXBsYWNlKC9cXC8vZywgJycpfVwiXG5cbiAgICBTcGEubG9hZCBwYWdlLCAnLmRldGFpbHMnLCAnI2NvbnRhaW5lciA+ICNpbm5lciAuZGV0YWlscycsIC0+XG4gICAgICBTcGEucHVzaCgpXG4gICAgXG4gIG1lbnVIYW5kbGVyOiAoZSkgLT5cblxuICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgcGFnZSA9ICQodGhpcykuZGF0YSAncGFnZSdcblxuICAgIHJldHVybiB0cnVlIGlmIHBhZ2UgaXMgdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRydWUgaWYgcGFnZSBpcyBsb2NhdGlvbi5wYXRobmFtZVxuXG4gICAgU3BhLmxvYWQgcGFnZSwgJyNpbm5lcicsICcjY29udGFpbmVyID4gI2lubmVyJywgLT5cbiAgICAgIFNwYS5wdXNoKClcblxuICBhY3RpdmF0ZTogLT5cbiAgICBfLm9mZiAnaGVhZGVyID4gLmlubmVyID4gLm1lbnUgPiB1bCA+IGxpID4gYSdcbiAgICBmb3IgaywgdiBvZiBTcGEub3B0aW9uc1xuICAgICAgaWYgU3BhLnBhZ2UubWF0Y2godikgaXNudCBudWxsXG4gICAgICAgIF8ub24gXCJoZWFkZXIgPiAuaW5uZXIgPiAubWVudSA+IHVsID4gbGkgPiBhLm9wdGlvbl8je2t9XCJcblxuICBsb2FkOiAocGFnZSwgZmluZCwgcmVwbGFjZSwgY2IpIC0+XG5cbiAgICBfLm9uICcuc3Bpbm5lcidcbiAgICBcbiAgICAkLmdldCBwYWdlXG4gICAgICAuc3VjY2VzcyAocmVzdWx0KSAtPlxuICAgICAgICBodG1sID0gJChyZXN1bHQpLmZpbHRlcignI2NvbnRhaW5lcicpLmZpbmQoZmluZClcbiAgICAgICAgUHJlaW1nIGh0bWwsIChjb21wbGV0ZSkgLT5cbiAgICAgICAgICAkKCcuc3Bpbm5lciA+IC5jb21wbGV0ZScpLmNzcyAnaGVpZ2h0JywgXCIje2NvbXBsZXRlKjEwMH0lXCJcbiAgICAgICAgLCAoZG9uZSkgLT5cbiAgICAgICAgICAkKCcuc3Bpbm5lciA+IC5jb21wbGV0ZScpLmNzcyAnaGVpZ2h0JywgJzEwMCUnXG4gICAgICAgICAgc2V0VGltZW91dCAtPlxuICAgICAgICAgICAgXy5vZmYgJy5zcGlubmVyJ1xuICAgICAgICAgICAgJCgnLnNwaW5uZXIgPiAuY29tcGxldGUnKS5jc3MgJ2hlaWdodCcsICcwJSdcbiAgICAgICAgICAgICQocmVwbGFjZSkucmVwbGFjZVdpdGggaHRtbFxuICAgICAgICAgICAgXy5vbiAnI2NvbnRhaW5lciA+ICNpbm5lcidcbiAgICAgICAgICAgIFNwYS5wYWdlID0gcGFnZVxuICAgICAgICAgICAgY2I/KClcbiAgICAgICAgICAgIFNwYS5hY3RpdmF0ZSgpXG4gICAgICAgICAgLCAxMDAwXG5cbiAgcHVzaDogLT5cbiAgICBoaXN0b3J5LnB1c2hTdGF0ZSB7dXJsOiBTcGEucGFnZX0sIFwiRGVzaWduIFNha2UgU3R1ZGlvIC0gI3tTcGEucGFnZX1cIiwgU3BhLnBhZ2VcbiAgICAgICAgXG4gIHBvcDogKGUpIC0+XG4gICAgaWYgZS5vcmlnaW5hbEV2ZW50LnN0YXRlIGlzIG51bGxcbiAgICAgIFNwYS5sb2FkIFNwYS5vcmlnaW5hbFxuICAgIGVsc2VcbiAgICAgIFNwYS5sb2FkIGUub3JpZ2luYWxFdmVudC5zdGF0ZS51cmxcblxuIl19
