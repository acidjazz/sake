var Spa;

Spa = {
  instagram: false,
  original: null,
  page: null,
  cache: {
    window: window,
    stickied: false
  },
  options: {
    work: '/work/',
    studio: '/studio/',
    contact: '/contact/'
  },
  i: function() {
    Spa.page = Spa.original = location.pathname;
    Spa.activate(Spa.page);
    Preimg($('#container > #inner'), function(complete) {
      console.log((complete * 100) + "%");
      return $('.spinner > .complete').css('height', (complete * 100) + "%");
    }, function(done) {
      $('.spinner > .complete').css('height', '100%');
      return setTimeout(function() {
        _.off('.spinner');
        $('.spinner > .complete').css('height', '0%');
        return _.on('#container > #inner');
      }, 1000);
    });
    Spa.cache.window = $(window);
    Spa.handlers();
    return setInterval(Spa.header, 20);
  },
  header: function() {
    if (Spa.cache.window.scrollTop() > 400 && Spa.cache.stickied === false) {
      _.on('header.sticky');
      _.off('header.normal');
      $('#container').addClass('sticky');
      Spa.cache.stickied = true;
    }
    if (Spa.cache.window.scrollTop() < 400 && Spa.cache.stickied === true) {
      _.off('header.sticky');
      _.on('header.normal');
      $('#container').removeClass('sticky');
      return Spa.cache.stickied = false;
    }
  },
  handlers: function() {
    $('header > .inner > .menu > ul > li > a, header > .inner > a.logo').on('click', Spa.menuHandler);
    $(window).bind('popstate', Spa.pop);
    $('#container').on('click', '.page.work > .tiles > a.tile', Spa.tileHandler);
    return $('#container').on('click', '.page.detail > .submenu > a', Spa.submenuHandler);
  },
  tileHandler: function(e) {
    var page;
    e.preventDefault();
    page = $(this).attr('href');
    if (page === void 0) {
      return true;
    }
    if (page === location.pathname) {
      return true;
    }
    return Spa.load(page, '#inner', '#container > #inner', function() {
      return Spa.push();
    });
  },
  submenuHandler: function(e) {
    var page;
    e.preventDefault();
    page = $(this).attr('href');
    if (page === void 0) {
      return true;
    }
    if (page === location.pathname) {
      return true;
    }
    _.on('.spinner');
    _.off('.submenu a');
    _.on(".submenu a.item_" + (page.replace('work', '').replace(/\//g, '')));
    return Spa.load(page, '.details', '#container > #inner .details', function() {
      return Spa.push();
    });
  },
  menuHandler: function(e) {
    var page;
    e.preventDefault();
    page = $(this).data('page');
    if (page === void 0) {
      return true;
    }
    if (page === location.pathname) {
      return true;
    }
    return Spa.load(page, '#inner', '#container > #inner', function() {
      return Spa.push();
    });
  },
  activate: function() {
    var k, ref, results, v;
    _.off('header > .inner > .menu > ul > li > a');
    ref = Spa.options;
    results = [];
    for (k in ref) {
      v = ref[k];
      if (Spa.page.match(v) !== null) {
        results.push(_.on("header > .inner > .menu > ul > li > a.option_" + k));
      } else {
        results.push(void 0);
      }
    }
    return results;
  },
  load: function(page, find, replace, cb) {
    _.on('.spinner');
    return $.get(page).success(function(result) {
      var html;
      html = $(result).filter('#container').find(find);
      return Preimg(html, function(complete) {
        return $('.spinner > .complete').css('height', (complete * 100) + "%");
      }, function(done) {
        $('.spinner > .complete').css('height', '100%');
        return setTimeout(function() {
          _.off('.spinner');
          $('.spinner > .complete').css('height', '0%');
          $(replace).replaceWith(html);
          _.on('#container > #inner');
          Spa.page = page;
          if (typeof cb === "function") {
            cb();
          }
          return Spa.activate();
        }, 1000);
      });
    });
  },
  push: function() {
    return history.pushState({
      url: Spa.page
    }, "Design Sake Studio - " + Spa.page, Spa.page);
  },
  pop: function(e) {
    if (e.originalEvent.state === null) {
      return Spa.load(Spa.original);
    } else {
      return Spa.load(e.originalEvent.state.url);
    }
  }
};

//# sourceMappingURL=data:application/json;base64,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MUIsQ0FBOEIsUUFBOUIsRUFBMEMsQ0FBQyxRQUFBLEdBQVMsR0FBVixDQUFBLEdBQWMsR0FBeEQ7TUFEVyxDQUFiLEVBRUUsU0FBQyxJQUFEO1FBQ0EsQ0FBQSxDQUFFLHNCQUFGLENBQXlCLENBQUMsR0FBMUIsQ0FBOEIsUUFBOUIsRUFBd0MsTUFBeEM7ZUFDQSxVQUFBLENBQVcsU0FBQTtVQUNULENBQUMsQ0FBQyxHQUFGLENBQU0sVUFBTjtVQUNBLENBQUEsQ0FBRSxzQkFBRixDQUF5QixDQUFDLEdBQTFCLENBQThCLFFBQTlCLEVBQXdDLElBQXhDO1VBQ0EsQ0FBQSxDQUFFLE9BQUYsQ0FBVSxDQUFDLFdBQVgsQ0FBdUIsSUFBdkI7VUFDQSxDQUFDLENBQUMsRUFBRixDQUFLLHFCQUFMO1VBQ0EsR0FBRyxDQUFDLElBQUosR0FBVzs7WUFDWDs7aUJBQ0EsR0FBRyxDQUFDLFFBQUosQ0FBQTtRQVBTLENBQVgsRUFRRSxJQVJGO01BRkEsQ0FGRjtJQUZPLENBRFg7RUFKSSxDQTVHTjtFQWlJQSxJQUFBLEVBQU0sU0FBQTtXQUNKLE9BQU8sQ0FBQyxTQUFSLENBQWtCO01BQUMsR0FBQSxFQUFLLEdBQUcsQ0FBQyxJQUFWO0tBQWxCLEVBQW1DLHVCQUFBLEdBQXdCLEdBQUcsQ0FBQyxJQUEvRCxFQUF1RSxHQUFHLENBQUMsSUFBM0U7RUFESSxDQWpJTjtFQW9JQSxHQUFBLEVBQUssU0FBQyxDQUFEO0lBQ0gsSUFBRyxDQUFDLENBQUMsYUFBYSxDQUFDLEtBQWhCLEtBQXlCLElBQTVCO2FBQ0UsR0FBRyxDQUFDLElBQUosQ0FBUyxHQUFHLENBQUMsUUFBYixFQURGO0tBQUEsTUFBQTthQUdFLEdBQUcsQ0FBQyxJQUFKLENBQVMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsR0FBL0IsRUFIRjs7RUFERyxDQXBJTCIsImZpbGUiOiJzcGEuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJcblNwYSA9XG5cbiAgaW5zdGFncmFtOiBmYWxzZVxuICBvcmlnaW5hbDogbnVsbFxuICBwYWdlOiBudWxsXG4gIGNhY2hlOlxuICAgIHdpbmRvdzogd2luZG93XG4gICAgc3RpY2tpZWQ6IGZhbHNlXG4gIG9wdGlvbnM6XG4gICAgd29yazogJy93b3JrLydcbiAgICBzdHVkaW86ICcvc3R1ZGlvLydcbiAgICBjb250YWN0OiAnL2NvbnRhY3QvJ1xuXG4gIGk6IC0+XG5cbiAgICBTcGEucGFnZSA9IFNwYS5vcmlnaW5hbCA9IGxvY2F0aW9uLnBhdGhuYW1lXG4gICAgU3BhLmFjdGl2YXRlIFNwYS5wYWdlXG5cbiAgICBQcmVpbWcgJCgnI2NvbnRhaW5lciA+ICNpbm5lcicpLCAoY29tcGxldGUpIC0+XG4gICAgICBjb25zb2xlLmxvZyBcIiN7Y29tcGxldGUqMTAwfSVcIlxuICAgICAgJCgnLnNwaW5uZXIgPiAuY29tcGxldGUnKS5jc3MgJ2hlaWdodCcsIFwiI3tjb21wbGV0ZSoxMDB9JVwiXG4gICAgLCAoZG9uZSkgLT5cbiAgICAgICQoJy5zcGlubmVyID4gLmNvbXBsZXRlJykuY3NzICdoZWlnaHQnLCAnMTAwJSdcbiAgICAgIHNldFRpbWVvdXQgLT5cbiAgICAgICAgXy5vZmYgJy5zcGlubmVyJ1xuICAgICAgICAkKCcuc3Bpbm5lciA+IC5jb21wbGV0ZScpLmNzcyAnaGVpZ2h0JywgJzAlJ1xuICAgICAgICBfLm9uICcjY29udGFpbmVyID4gI2lubmVyJ1xuICAgICAgLCAxMDAwXG5cbiAgICBTcGEuY2FjaGUud2luZG93ID0gJCh3aW5kb3cpXG5cbiAgICBTcGEuaGFuZGxlcnMoKVxuXG4gICAgc2V0SW50ZXJ2YWwgU3BhLmhlYWRlciwgMjBcblxuICBoZWFkZXI6IC0+XG5cbiAgICBpZiBTcGEuY2FjaGUud2luZG93LnNjcm9sbFRvcCgpID4gNDAwIGFuZCBTcGEuY2FjaGUuc3RpY2tpZWQgaXMgZmFsc2VcbiAgICAgIF8ub24gJ2hlYWRlci5zdGlja3knXG4gICAgICBfLm9mZiAnaGVhZGVyLm5vcm1hbCdcbiAgICAgICQoJyNjb250YWluZXInKS5hZGRDbGFzcyAnc3RpY2t5J1xuXG4gICAgICBTcGEuY2FjaGUuc3RpY2tpZWQgPSB0cnVlXG5cbiAgICBpZiBTcGEuY2FjaGUud2luZG93LnNjcm9sbFRvcCgpIDwgNDAwIGFuZCBTcGEuY2FjaGUuc3RpY2tpZWQgaXMgdHJ1ZVxuICAgICAgXy5vZmYgJ2hlYWRlci5zdGlja3knXG4gICAgICBfLm9uICdoZWFkZXIubm9ybWFsJ1xuICAgICAgJCgnI2NvbnRhaW5lcicpLnJlbW92ZUNsYXNzICdzdGlja3knXG4gICAgICBTcGEuY2FjaGUuc3RpY2tpZWQgPSBmYWxzZVxuXG4gIGhhbmRsZXJzOiAtPlxuXG4gICAgIyBtYWluIG1lbnVcbiAgICAkKCdoZWFkZXIgPiAuaW5uZXIgPiAubWVudSA+IHVsID4gbGkgPiBhLCBoZWFkZXIgPiAuaW5uZXIgPiBhLmxvZ28nKS5vbiAnY2xpY2snLCBTcGEubWVudUhhbmRsZXJcblxuICAgICMgYmFjayBidXR0b25cbiAgICAkKHdpbmRvdykuYmluZCAncG9wc3RhdGUnLCBTcGEucG9wXG5cbiAgICAjIHdvcmsgdGlsZSBtZW51XG4gICAgJCgnI2NvbnRhaW5lcicpLm9uICdjbGljaycsICcucGFnZS53b3JrID4gLnRpbGVzID4gYS50aWxlJywgU3BhLnRpbGVIYW5kbGVyXG5cbiAgICAjIHdvcmsgc3ViIG1lbnVcbiAgICAkKCcjY29udGFpbmVyJykub24gJ2NsaWNrJywgJy5wYWdlLmRldGFpbCA+IC5zdWJtZW51ID4gYScsIFNwYS5zdWJtZW51SGFuZGxlclxuXG4gIHRpbGVIYW5kbGVyOiAoZSkgLT5cblxuICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgcGFnZSA9ICQodGhpcykuYXR0ciAnaHJlZidcblxuICAgIHJldHVybiB0cnVlIGlmIHBhZ2UgaXMgdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRydWUgaWYgcGFnZSBpcyBsb2NhdGlvbi5wYXRobmFtZVxuXG4gICAgU3BhLmxvYWQgcGFnZSwgJyNpbm5lcicsICcjY29udGFpbmVyID4gI2lubmVyJywgLT5cbiAgICAgIFNwYS5wdXNoKClcblxuICBzdWJtZW51SGFuZGxlcjogKGUpIC0+XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgIHBhZ2UgPSAkKHRoaXMpLmF0dHIgJ2hyZWYnXG5cbiAgICByZXR1cm4gdHJ1ZSBpZiBwYWdlIGlzIHVuZGVmaW5lZFxuICAgIHJldHVybiB0cnVlIGlmIHBhZ2UgaXMgbG9jYXRpb24ucGF0aG5hbWVcblxuICAgIF8ub24gJy5zcGlubmVyJ1xuICAgIF8ub2ZmICcuc3VibWVudSBhJ1xuICAgIF8ub24gXCIuc3VibWVudSBhLml0ZW1fI3twYWdlLnJlcGxhY2UoJ3dvcmsnLCAnJykucmVwbGFjZSgvXFwvL2csICcnKX1cIlxuXG4gICAgU3BhLmxvYWQgcGFnZSwgJy5kZXRhaWxzJywgJyNjb250YWluZXIgPiAjaW5uZXIgLmRldGFpbHMnLCAtPlxuICAgICAgU3BhLnB1c2goKVxuICAgIFxuICBtZW51SGFuZGxlcjogKGUpIC0+XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgIHBhZ2UgPSAkKHRoaXMpLmRhdGEgJ3BhZ2UnXG5cbiAgICByZXR1cm4gdHJ1ZSBpZiBwYWdlIGlzIHVuZGVmaW5lZFxuICAgIHJldHVybiB0cnVlIGlmIHBhZ2UgaXMgbG9jYXRpb24ucGF0aG5hbWVcblxuICAgIFNwYS5sb2FkIHBhZ2UsICcjaW5uZXInLCAnI2NvbnRhaW5lciA+ICNpbm5lcicsIC0+XG4gICAgICBTcGEucHVzaCgpXG5cbiAgYWN0aXZhdGU6IC0+XG4gICAgXy5vZmYgJ2hlYWRlciA+IC5pbm5lciA+IC5tZW51ID4gdWwgPiBsaSA+IGEnXG4gICAgZm9yIGssIHYgb2YgU3BhLm9wdGlvbnNcbiAgICAgIGlmIFNwYS5wYWdlLm1hdGNoKHYpIGlzbnQgbnVsbFxuICAgICAgICBfLm9uIFwiaGVhZGVyID4gLmlubmVyID4gLm1lbnUgPiB1bCA+IGxpID4gYS5vcHRpb25fI3trfVwiXG5cbiAgbG9hZDogKHBhZ2UsIGZpbmQsIHJlcGxhY2UsIGNiKSAtPlxuXG4gICAgXy5vbiAnLnNwaW5uZXInXG4gICAgXG4gICAgJC5nZXQgcGFnZVxuICAgICAgLnN1Y2Nlc3MgKHJlc3VsdCkgLT5cbiAgICAgICAgaHRtbCA9ICQocmVzdWx0KS5maWx0ZXIoJyNjb250YWluZXInKS5maW5kKGZpbmQpXG4gICAgICAgIFByZWltZyBodG1sLCAoY29tcGxldGUpIC0+XG4gICAgICAgICAgJCgnLnNwaW5uZXIgPiAuY29tcGxldGUnKS5jc3MgJ2hlaWdodCcsIFwiI3tjb21wbGV0ZSoxMDB9JVwiXG4gICAgICAgICwgKGRvbmUpIC0+XG4gICAgICAgICAgJCgnLnNwaW5uZXIgPiAuY29tcGxldGUnKS5jc3MgJ2hlaWdodCcsICcxMDAlJ1xuICAgICAgICAgIHNldFRpbWVvdXQgLT5cbiAgICAgICAgICAgIF8ub2ZmICcuc3Bpbm5lcidcbiAgICAgICAgICAgICQoJy5zcGlubmVyID4gLmNvbXBsZXRlJykuY3NzICdoZWlnaHQnLCAnMCUnXG4gICAgICAgICAgICAkKHJlcGxhY2UpLnJlcGxhY2VXaXRoIGh0bWxcbiAgICAgICAgICAgIF8ub24gJyNjb250YWluZXIgPiAjaW5uZXInXG4gICAgICAgICAgICBTcGEucGFnZSA9IHBhZ2VcbiAgICAgICAgICAgIGNiPygpXG4gICAgICAgICAgICBTcGEuYWN0aXZhdGUoKVxuICAgICAgICAgICwgMTAwMFxuXG4gIHB1c2g6IC0+XG4gICAgaGlzdG9yeS5wdXNoU3RhdGUge3VybDogU3BhLnBhZ2V9LCBcIkRlc2lnbiBTYWtlIFN0dWRpbyAtICN7U3BhLnBhZ2V9XCIsIFNwYS5wYWdlXG4gICAgICAgIFxuICBwb3A6IChlKSAtPlxuICAgIGlmIGUub3JpZ2luYWxFdmVudC5zdGF0ZSBpcyBudWxsXG4gICAgICBTcGEubG9hZCBTcGEub3JpZ2luYWxcbiAgICBlbHNlXG4gICAgICBTcGEubG9hZCBlLm9yaWdpbmFsRXZlbnQuc3RhdGUudXJsXG5cbiJdfQ==
